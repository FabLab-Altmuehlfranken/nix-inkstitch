# Nix Patches
These patches are generated by `git format-patch` from <https://codeberg.org/tropf/inkstitch> (branch `nix`).
On update fetch from upstream, rebase that branch and update this directory.

## Python Fixes
Warnings are silenced on a broad scale.

Path searches for default paths are adjusted s.t. they do not search for non-existent paths in NixOS.

## Inx (Inkscape Extension) Files
The invocation always uses (not-bundled) `.py` files,
as *manual install* upstream.
Upstream typically bundles the python files into standalone programs for distribution.

## Electron
The build process is split into two steps.
Upstream compiles a `main.js` and then bundles that into a standalone application.
The nix version only compiles `main.js` and delivers that as package.
Subsequently, build process and invocation are changed to reflect that.
This breaks assumptions about the routing that Ink/Stitch makes,
which are fixed through a patch.

The menu is re-enabled in electron windows in order to allow for easier debugging.
(And this menu doesn't do any harm in production.)

A lockfile is added as nix requires a given lockfile to build.

Add the file `flaskserverport.json` that can communicate a specific port for electron-to-Ink/Stitch communication to always use a dynamically configured port.
Ink/Stitch will not build without this file.
